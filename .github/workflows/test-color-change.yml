name: Test Color Change PR

on:
  workflow_dispatch: # uruchamiany ręcznie z poziomu GitHub Actions

jobs:
  create-test-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Set up Git
        run: |
          git config user.name "ChatGPT Codex Bot"
          git config user.email "bot@openai.com"

      - name: Create new branch
        run: |
          git checkout -b feature/test-color-change

      - name: Modify landing page background color
        run: |
          FILE="app/page.tsx"
          if grep -q "bg-[#faf7f3]" "$FILE"; then
            sed -i 's/bg-[#faf7f3]/bg-[#f4ede4]/g' "$FILE"
            echo "✅ Background color updated in $FILE"
          else
            echo "⚠️ No matching color found, skipping replacement."
          fi

      - name: Commit and push changes
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git add app/page.tsx
          git commit -m "test: change background color of landing page" || echo "No changes to commit"
          git push origin feature/test-color-change

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: "Test: change background color of landing page"
          body: "Testowa zmiana koloru tła strony głównej w celu potwierdzenia połączenia GitHub API."
          branch: feature/test-color-change
          base: main
